module.exports = curry

/*
 for (var key in arguments) does not work in firefox. WTF!?
 
 for some reason the properties are not enumerable.
*/

function curry (){
  var left, right, func, self

  for(var key = 0; key < arguments.length; key ++){ 
    var value = arguments[key]
    
    if(!right && Array.isArray(value))
      if (!func) 
        left = value
      else
        right = value
    else if (!func && typeof value === 'function')
      func = value
    else 
      self = value
  }
  return function (){
   var args = []
   for(var key = 0; key < arguments.length; key ++)
    args.push(arguments[key])
  
   return func.apply(self,append([].concat(left || []),args).concat(right || [])) 
  }
}
function append (a,args){
  for (i in args) 
    a.push(args[i])
  return a 
}
    /*
    call styles:
    
    curry([left],fn,[right])
    curry(fn,[right])
    curry([left],fn)
    curry(fn)

    calling styles:
    curry([left],fn,[right],self)
    curry(fn,[right],self)
    curry([left],fn,self)
    curry(fn,self)
    */

